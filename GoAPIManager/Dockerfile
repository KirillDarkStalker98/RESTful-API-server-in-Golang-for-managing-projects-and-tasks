# Указываем базовый образ для Go
FROM golang:1.23.0-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем Go модули и устанавливаем зависимости
COPY go.mod go.sum ./
RUN go mod download

# Копируем весь код приложения
COPY . .

# Собираем приложение
RUN go build -o server ./main.go

# Указываем порт, который будет использоваться
EXPOSE 8080

# Запуск собранного приложения
CMD ["./server"]